<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.2.1/backbone-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/backbone-localstorage.js/1.1.16/backbone.localStorage-min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/annyang/1.6.0/annyang.min.js"></script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.0/css/bootstrap.min.css" />
<link href="style.css" />
<script>
$(document).ready(function(){

if (annyang) {
  var Todos = Backbone.Collection.extend({

    localStorage: new Backbone.LocalStorage("todos") 


  });
  var todos = new Todos();
  function render() {
    console.log('rendering', todos);
    $('ol').empty();
    _.each(todos.models, function(todo, index){
      $('ol').append($('<li/>').text(todo.attributes.todo));

    })
  }
  todos.fetch({
    success: function () {
      render();
    }
  });
  console.log(todos);
  todos.on("add", function() {
    render();
  });

  todos.on("remove", function() {
    render();
  });
  var commands = {
    'i need to *message': function(message) {
      todos.create({todo: message});
    },
    'delete *number': function(number){

      console.log(number);
      var elIndex = number - 1;
      todos.get(todos.models[elIndex]).destroy();
    }
  }; 

  annyang.debug();
  // Add our commands to annyang
  annyang.addCommands(commands);

  // Start listening. You can call this here, or attach this call to an event, button, etc.
  annyang.start();
}
})

</script>
<div class="container">
<ol></ol>
</div>